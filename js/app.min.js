(()=>{"use strict";const t=new class{constructor({sliderWrap:t,sliderItems:e,slidesToShow:s=3,position:i=0,addClassName:o=!1,classActiveItem:n=!1,classNextItem:r=!1,classPrevItem:l=!1,responsive:a=[]}){this.sliderWrap=document.querySelector(t),this.sliderItems=document.querySelector(e),this.slides=this.sliderItems.children,this.slidesToShow=s,this.widthSlide=100/this.slidesToShow,this.addClassName=o,this.position=i,this.responsive=a,this.firstSlide=this.slides[0],this.lastSlide=this.slides[this.slides.length-1],this.classActiveItem=n||"active",this.classNextItem=r||"next",this.classPrevItem=l||"prev",this.swipeStart=this.dragStart.bind(this),this.swipeEnd=this.dragEnd.bind(this),this.swipeAction=this.dragMove.bind(this),this.moveNext=this.nextSlide.bind(this),this.movePrev=this.prevSlide.bind(this),this.isDrag=!1,this.animationId="",this.timerId="",this.timeTransform=".6",this.startPosition=0,this.currentTranslate=0,this.prevTranslate=0,this.mobilePosition=!1,this.moving=this.widthSlide/10,this.blockSlide=!1}cloneSlides(){this.slides.length<=this.slidesToShow&&[...this.slides].forEach((t=>this.sliderItems.append(t.cloneNode(!0))));const t=this.firstSlide.cloneNode(!0),e=this.lastSlide.cloneNode(!0);this.sliderItems.append(t),this.sliderItems.insertAdjacentElement("afterBegin",e),this.slides=this.sliderItems.querySelectorAll(`.${this.addClassName}`)}addStyle(){let t=document.getElementById(`${this.addClassName}-style`);t||(t=document.createElement("style"),t.id=`${this.addClassName}-style`),t.textContent=`\n      .${this.addClassName}-item {\n         width: calc(${this.widthSlide}% - 7rem);\n      }\n      .${this.classActiveItem} {\n         opacity: 1;\n      }\n      `,document.head.append(t)}addClass(){for(const t of[...this.slides])t.classList.add(`${this.addClassName}-item`)}setActiveItem(t){for(const t of[...this.slides])t.classList.remove(this.classNextItem),t.classList.remove(this.classPrevItem),t.classList.remove(this.classActiveItem);t?this.slides[this.position].classList.add(this.classActiveItem):(this.slides[this.position].classList.add(this.classActiveItem),this.slides[this.position-1].classList.add(this.classPrevItem),this.slides[this.position+1].classList.add(this.classNextItem))}getPositionX(t){return t.type.includes("mouse")?t.pageX:t.touches[0].clientX}dragStart(t){t.preventDefault(),t.target.closest(`.${this.classActiveItem}`)?("touchstart"===t.type?(this.sliderItems.addEventListener("touchend",this.swipeEnd),this.sliderItems.addEventListener("touchmove",this.swipeAction)):(this.sliderItems.addEventListener("mouseup",this.swipeEnd),this.sliderItems.addEventListener("mousemove",this.swipeAction),this.sliderItems.addEventListener("mouseleave",this.swipeEnd)),this.isDrag=!0,this.animationId=requestAnimationFrame(this.animation.bind(this)),this.startPosition=this.getPositionX(t)):t.target.closest(`.${this.classNextItem}`)&&!this.blockSlide?(this.blockSlide=!0,this.nextSlide()):t.target.closest(`.${this.classPrevItem}`)&&!this.blockSlide&&(this.blockSlide=!0,this.prevSlide())}dragMove(t){if(this.isDrag){const e=this.getPositionX(t);this.currentTranslate=this.prevTranslate-(e-this.startPosition)/this.startPosition*this.widthSlide}}dragEnd(){this.isDrag=!1;const t=this.currentTranslate-this.prevTranslate;t<-this.moving&&!this.blockSlide?(this.blockSlide=!0,this.prevSlide()):t>this.moving&&!this.blockSlide?(this.blockSlide=!0,this.nextSlide()):this.currentTranslate=this.prevTranslate,cancelAnimationFrame(this.animationId),this.sliderItems.removeEventListener("touchend",this.swipeEnd),this.sliderItems.removeEventListener("touchmove",this.swipeAction),this.sliderItems.removeEventListener("mouseup",this.swipeEnd),this.sliderItems.removeEventListener("mousemove",this.swipeAction),this.sliderItems.removeEventListener("mouseleave",this.swipeEnd)}nextSlide(){this.position<this.slides.length-2&&(this.setPosition(this.timeTransform,"+"),this.position>this.slides.length-3&&this.resetSlide(3))}prevSlide(){this.position>1&&(this.setPosition(this.timeTransform,"-"),this.position<2&&this.resetSlide(4))}resetSlide(t){clearTimeout(this.timerId),this.setPosition(this.timeTransform),this.position=t,this.timerId=setTimeout((()=>{this.setPosition(0),this.blockSlide=!1}),600)}setPosition(t,e){e&&("+"===e?++this.position:--this.position),this.mobilePosition?(this.currentTranslate=this.position*this.widthSlide,this.setActiveItem(this.mobilePosition)):(this.currentTranslate=(this.position-1)*this.widthSlide,this.setActiveItem()),this.prevTranslate=this.currentTranslate,this.sliderItems.style.transition=`transform ${t}s`,this.moveSlider();const s=()=>{this.blockSlide=!1,this.sliderItems.removeEventListener("transitionend",s)};this.sliderItems.addEventListener("transitionend",s)}moveSlider(){this.sliderItems.style.transform=`translateX(-${this.currentTranslate}%)`}animation(){this.moveSlider(),this.isDrag&&requestAnimationFrame(this.animation.bind(this))}controlSlider(){this.sliderItems.addEventListener("mousedown",this.swipeStart),this.sliderItems.addEventListener("touchstart",this.swipeStart)}init(){this.cloneSlides(),this.addClass(),this.controlSlider(),this.responseInit()}responseInit(){const t=this.slidesToShow,e=this.responsive.map((t=>t.breakpoint)),s=Math.max(...e),i=()=>{const i=document.documentElement.clientWidth;if(i<s)for(let t=0;t<e.length;t++)i<e[t]&&(this.slidesToShow=this.responsive[t].slidesToShow,this.widthSlide=100/this.slidesToShow,this.addStyle(),this.mobilePosition=!0,this.moving=this.widthSlide/20,this.setPosition());else this.slidesToShow=t,this.widthSlide=100/this.slidesToShow,this.addStyle(),this.mobilePosition=!1,this.moving=this.widthSlide/10,this.setPosition()};i(),window.addEventListener("resize",i)}}({sliderWrap:".reviews__wrap",sliderItems:".reviews__slider",slidesToShow:3,position:2,addClassName:"reviews__slide",classActiveItem:"slide--active",classNextItem:"slide--next",classPrevItem:"slide--prev",responsive:[{breakpoint:769,slidesToShow:1}]}),e=t=>void 0===t||"auto"===t||"instant"===t||"smooth"===t;function s(t,e){this.scrollLeft=t,this.scrollTop=e}const i=(t,e,s="cannot convert to dictionary.")=>`Failed to execute '${t}' on '${e}': ${s}`,o=(t,e,s)=>i(t,e,`The provided value '${s}' is not a valid enum value of type ScrollBehavior.`),n=(t,e,s)=>{var i;const o=`__SEAMLESS.BACKUP$${e}`;return t[o]||!t[e]||(null===(i=t[e])||void 0===i?void 0:i.__isPolyfill)||(t[o]=t[e]),t[o]||s},r=t=>t.ownerDocument.scrollingElement||t.ownerDocument.documentElement,l=t=>.5*(1-Math.cos(Math.PI*t));function a(){var t;let e;return e=(null===(t=window.performance)||void 0===t?void 0:t.now)?()=>window.performance.now():()=>window.Date.now(),a=e,e()}const c=t=>{const e=(a()-t.timeStamp)/(t.duration||500);if(e>1)return t.method(t.targetX,t.targetY),void t.callback();const s=(t.timingFunc||l)(e),i=t.startX+(t.targetX-t.startX)*s,o=t.startY+(t.targetY-t.startY)*s;t.method(i,o),t.rafId=window.requestAnimationFrame((()=>{c(t)}))},d=t=>isFinite(t)?Number(t):0,h=(t=>(l,h,m)=>{const[u,v]=(p=l).window===p?[r(l.document.documentElement),"Window"]:[l,"Element"];var p;const w=null!=h?h:{};if(!(t=>{const e=typeof t;return null!==t&&("object"===e||"function"===e)})(w))throw new TypeError(i(t,v));if(!e(w.behavior))throw new TypeError(o(t,v,w.behavior));"scrollBy"===t&&(w.left=d(w.left)+u.scrollLeft,w.top=d(w.top)+u.scrollTop),((t,e,i)=>{var o,r;if(!(t=>{var e;return null!==(e=t.isConnected)&&void 0!==e?e:!(t.ownerDocument&&1&t.ownerDocument.compareDocumentPosition(t))})(t))return;const l=t.scrollLeft,h=t.scrollTop,m=d(null!==(o=e.left)&&void 0!==o?o:l),u=d(null!==(r=e.top)&&void 0!==r?r:h);if(m===l&&u===h)return;const v=n(HTMLElement.prototype,"scroll",s),p=n(Object.getPrototypeOf(t),"scroll",v).bind(t);if("smooth"!==e.behavior)return void p(m,u);const w=()=>{window.removeEventListener("wheel",f),window.removeEventListener("touchmove",f)},g=Object.assign(Object.assign({},i),{timeStamp:a(),startX:l,startY:h,targetX:m,targetY:u,rafId:0,method:p,callback:w}),f=()=>{window.cancelAnimationFrame(g.rafId),w()};window.addEventListener("wheel",f,{passive:!0,once:!0}),window.addEventListener("touchmove",f,{passive:!0,once:!0}),c(g)})(u,w,m)})("scroll"),m=t=>{switch(t){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},u=(t,e,s,i)=>{let o=0;switch(e||(o^=2),t){case 0:o=o>>1|(1&o)<<1,[s,i]=[i,s];break;case 1:case 3:o^=1;break;case 4:o^=2}return[o,s,i]},v=t=>1==(1&u(m(t.writingMode),"rtl"!==t.direction,void 0,void 0)[0]),p=(t,e,s,i,o,n,r)=>0!==t?t:o<e&&n>s||o>e&&n<s?null:o<=e&&r<=i||n>=s&&r>=i?2:n>s&&r<i||o<e&&r>i?3:null,w=t=>"visible"!==t&&"clip"!==t,g=(t,e)=>(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth)&&(w(e.overflowY)||w(e.overflowX)||t===r(t)),f=t=>{const e=t.parentNode,s=t.parentElement;if(null===s&&null!==e){if(11===e.nodeType)return e.host;if(9===e.nodeType)return(t=>{var e;try{return(null===(e=t.ownerDocument.defaultView)||void 0===e?void 0:e.frameElement)||null}catch(t){return null}})(t)}return s},S=(t,e,s)=>t<e?e:t>s?s:t,y=(t,e,s)=>{switch(t){case 1:return(e+s)/2;case 3:return s;case 2:case 0:return e}},I=(t,e)=>{var s,i,o;const n=null===(s=t.ownerDocument.defaultView)||void 0===s?void 0:s.visualViewport,[l,a,c,d]=t===r(t)?[0,0,null!==(i=null==n?void 0:n.width)&&void 0!==i?i:t.clientWidth,null!==(o=null==n?void 0:n.height)&&void 0!==o?o:t.clientHeight]:[e.left,e.top,t.clientWidth,t.clientHeight],h=l+t.clientLeft,m=a+t.clientTop;return[m,h+c,m+d,h]},b=(t,s,i)=>{const n=s||{};if(!e(n.behavior))throw new TypeError(o("scrollIntoView","Element",n.behavior));((t,e)=>{const s=[];let i=t.ownerDocument,o=i.defaultView;if(!o)return s;const n=window.getComputedStyle(t),r="rtl"!==n.direction,l=m(n.writingMode||n.getPropertyValue("-webkit-writing-mode")||n.getPropertyValue("-ms-writing-mode")),[a,c]=((t,e,s)=>{const[i,o,n]=u(e,s,t.block||"start",t.inline||"nearest");return[o,n].map(((t,e)=>{switch(t){case"center":return 1;case"nearest":return 0;default:return"start"===t==!(i>>e&1)?2:3}}))})(e,l,r);let[d,h,w,b]=((t,e,s)=>{const{top:i,right:o,bottom:n,left:r}=e,l=(a=t.ownerDocument,["scroll-margin","scroll-snap-margin"].filter((t=>t in a.documentElement.style))[0]);var a;if(!l)return[i,o,n,r];const c=t=>{const e=s.getPropertyValue(`${l}-${t}`);return parseInt(e,10)||0};return[i-c("top"),o+c("right"),n+c("bottom"),r-c("left")]})(t,t.getBoundingClientRect(),n);for(let n=f(t);null!==n;n=f(n)){if(i!==n.ownerDocument){if(i=n.ownerDocument,o=i.defaultView,!o)break;const{left:t,top:e}=n.getBoundingClientRect();d+=e,h+=t,w+=e,b+=t}const t=o.getComputedStyle(n);if("fixed"===t.position)break;if(!g(n,t))continue;const r=n.getBoundingClientRect(),[l,m,u,f]=I(n,r),E=p(a,f,m,n.clientWidth,b,h,h-b),L=p(c,l,u,n.clientHeight,d,w,w-d),T=null===E?0:y(E,b,h)-y(E,f,m),A=null===L?0:y(L,d,w)-y(L,l,u),P=v(t)?S(T,-n.scrollWidth+n.clientWidth-n.scrollLeft,-n.scrollLeft):S(T,-n.scrollLeft,n.scrollWidth-n.clientWidth-n.scrollLeft),k=S(A,-n.scrollTop,n.scrollHeight-n.clientHeight-n.scrollTop);s.push([n,{left:n.scrollLeft+P,top:n.scrollTop+k,behavior:e.behavior}]),d=Math.max(d-k,l),h=Math.min(h-P,m),w=Math.min(w-k,u),b=Math.max(b-P,f)}return s})(t,n).forEach((([t,e])=>{h(t,e,i)}))};(t=>{const e=new Image;e.onload=e.onerror=function(){!function(t){const e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})(),document.querySelector(".main-display__menu").addEventListener("click",(t=>{t.preventDefault();const e=t.target;if(e.closest(".main-display__menu-item")){const t=e.getAttribute("href").slice(1),s=document.getElementById(t);s&&b(s,{behavior:"smooth",block:"center",inline:"center"})}})),(()=>{const t=document.querySelector(".main-display__button"),e=document.querySelector(".modal"),s=document.querySelector(".modal__button"),i=e.querySelector(".modal__inner"),o=document.getElementById("modal__check"),n=document.querySelectorAll(".modal__input"),r=document.querySelector(".modal__message"),l=()=>[...n,r].every((t=>""!==t.value)),a=t=>{o.checked=!1,[...n,r].forEach((t=>t.value="")),e.classList.remove("active"),t&&t.remove()};t.addEventListener("click",(t=>{t.preventDefault(),e.classList.add("active"),(()=>{document.body.dataset.scrollY=window.scrollY;const t=window.innerWidth-document.body.offsetWidth;document.body.style.cssText=`\n      position: fixed;\n      top: -${window.scrollY}px;\n      left: 0;\n      width: 100%;\n      overflow: hidden;\n      height: 100vh;\n      padding-right: ${t}px;\n   `})()})),e.addEventListener("click",(t=>{if(!t.target.closest(".modal__inner")){let t=document.querySelector(".send-message");a(t),document.body.style.cssText="",window.scroll({top:document.body.dataset.scrollY})}})),s.addEventListener("click",(async t=>{t.preventDefault();let e=document.querySelector(".send-message");if(!e){const t='<span class="send-message"><span>';i.insertAdjacentHTML("beforeEnd",t),e=document.querySelector(".send-message")}o.checked&&l()?(await(async t=>{try{const e=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});return await e.json()}catch(t){console.error(t)}})(),e.classList.add("active"),e.textContent="Заказ успешно отправлен!",setTimeout((()=>{a(e)}),2e3)):o.checked&&!l()?(e.textContent="Заполните все поля!",e.classList.add("active")):(e.textContent="Отметьте чекбокс!",e.classList.add("active"))}))})(),t.init(),(()=>{const t=document.querySelector(".header__maps-info"),e=document.querySelector(".choice-region__first"),s=document.querySelector(".choice-region__second"),i=document.querySelector("title"),o=document.querySelectorAll(".user-location"),n=()=>{localStorage.getItem("location")?(i.innerHTML=`Evarugs: ${JSON.parse(localStorage.getItem("location"))}`,o.forEach((t=>{t.textContent=JSON.parse(localStorage.getItem("location"))}))):(i.innerHTML="Evarugs: Москва",o.forEach((t=>{t.textContent="Москва"})))},r=t=>{t.preventDefault(),t.target.closest("li")?(localStorage.setItem("location",JSON.stringify(t.target.closest("li").textContent.trim())),n(),s.classList.remove("active")):t.target.closest(".choice-region__second-close-button")&&s.classList.remove("active")},l=t=>{t.target.closest(".location-change")&&(s.classList.add("active"),e.classList.remove("active"),s.addEventListener("click",r)),t.target.closest(".location-close")&&e.classList.remove("active")};n(),t.addEventListener("click",(t=>{t.preventDefault(),e.classList.add("active"),e.addEventListener("click",l)}))})()})();